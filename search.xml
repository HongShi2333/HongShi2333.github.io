<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Deepinfraé€†å‘æ€è·¯+è¿‡ç¨‹</title>
      <link href="//post/62072.html"/>
      <url>//post/62072.html</url>
      
        <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>å‰å‡ å¤©åœ¨ç½‘ä¸Šå†²æµªçš„æ—¶å€™å‘ç°ä¸€ä¸ªç½‘ç«™ï¼Œå«<a href="https://deepinfra.com/">Deepinfra</a>ï¼Œç‚¹å‡»å»å‘ç°æ˜¯ä¸€ä¸ªAIçš„ç½‘ç«™ï¼Œæœ‰æ„æ€çš„æ˜¯ç½‘ç«™é¦–é¡µæœ‰ä¸€ä¸ªå¯¹è¯é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢ä¼¼ä¹æ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨ç«™å†…AIçš„ï¼Œè€Œä¸”æ²¡æœ‰æ¬¡æ•°ã€å†…å®¹é™åˆ¶ã€‚</p><p>äºæ˜¯æˆ‘å°±æ‰“å¼€F12ï¼Œå‘äº†æ¡æ¶ˆæ¯æ‰“ç®—æŠ“ä¸€ä¸‹ç„¶åæœ‰æ„æ€çš„å°±æ¥äº†ã€‚<img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-TLck.png"></p><p>è¿™ä¸ªcomletionsç›´æ¥è¯·æ±‚<a href="https://api.deepinfra.com/v1/openai/chat/completions">https://api.deepinfra.com/v1/openai/chat/completions</a> ï¼Œè¿™ä¸ªåœ°å€ä¸OpenAIçš„æ ‡å‡†æ ¼å¼æœ‰ä¸€äº›å·®è·ï¼Œè€Œä¸”æˆ‘æ‰¾äº†ä¸€å¤§åœˆéƒ½æ²¡æ‰¾åˆ°cookieæˆ–è€…åˆ«çš„ç”¨äºé‰´æƒçš„ä¸œè¥¿ï¼Œä¼¼ä¹å®ƒå‰ç«¯æ²¡æœ‰åšé‰´æƒï¼Œæˆ‘è¯•ç€åœ¨pythonä¸­æŠŠè°ƒç”¨åœ°å€å¡«å¥½ï¼Œç¼–äº†ä¸€ä¸ªkeyï¼Œå±…ç„¶è°ƒç”¨æˆåŠŸäº†ï¼Œè¿˜æ˜¯æµå¼çš„</p><p>é‚£ä¹ˆäº‹æƒ…å¾ˆæœ‰æ„æ€äº†ï¼Œå…¶å®åˆ°è¿™ä¸€æ­¥å°±å·²ç»å¯ä»¥äº†ï¼Œèƒ½ç›´æ¥å»å¡«ä¸€ä¸‹æ¨¡å‹åç›´æ¥å»ç”¨ã€‚ä½†æ˜¯æˆ‘æƒ³è¦æŠŠå®ƒæ¥å…¥åˆ°æˆ‘çš„APIç«™é‡Œï¼Œé‚£ä¹ˆæˆ‘å°±è¦åšç‚¹å¤šä½™çš„äº‹äº†ã€‚</p><p>ç›®æ ‡ï¼šæ ‡å‡†OpenAIæ ¼å¼è°ƒç”¨ï¼Œèƒ½é€šè¿‡&#x2F;v1&#x2F;modelsè·å–æ¨¡å‹åˆ—è¡¨ï¼Œè‡ªå®šä¹‰API KEYé™åˆ¶è¯·æ±‚ã€‚</p><p>é¦–å…ˆè¿™ä¸ªé¡¹ç›®çš„åŸºè°ƒå·²ç»å®šä¸‹äº†ï¼Œæ˜¯2apiï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é€‰ä¸€ä¸ªåˆé€‚çš„è¯­è¨€ï¼Œæ–¹ä¾¿éƒ¨ç½²çš„åŒæ—¶ä¹Ÿè¦è¶³å¤Ÿä¼˜é›…ï¼Œæˆ‘é€‰æ‹©äº†ç”¨Denoå»å†™ã€‚</p><h4 id="å¼€å†™ï¼"><a href="#å¼€å†™ï¼" class="headerlink" title="å¼€å†™ï¼"></a>å¼€å†™ï¼</h4><p>é¦–å…ˆè¦è·å–æ¨¡å‹åˆ—è¡¨ï¼Œæˆ‘åŸæœ¬æ‰“ç®—ç…§ç€è¯·æ±‚ä¸€ä¸ªä¸ªå»è–…ï¼Œä½†æ˜¯æˆ‘çªç„¶å‘ç°ä»–ä»¬æœ‰å®˜æ–¹çš„APIæ–‡æ¡£ï¼Œå°±ç›´æ¥è¿›å»äº†ï¼Œé‡Œé¢æœ‰é¦–é¡µèƒ½è°ƒç”¨çš„æ¨¡å‹ï¼Œå°±ç›´æ¥copyè¿‡æ¥ç”¨äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const SUPPORTED_MODELS = [</span><br><span class="line">  &#123; id: &quot;openai/gpt-oss-120b&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;moonshotai/Kimi-K2-Instruct&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;zai-org/GLM-4.5&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;Qwen/Qwen3-Coder-480B-A35B-Instruct-Turbo&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;deepseek-ai/DeepSeek-R1-0528-Turbo&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;deepseek-ai/DeepSeek-V3-0324-Turbo&quot;, object: &quot;model&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;meta-llama/Llama-4-Maverick-17B-128E-Instruct-Turbo&quot;, object: &quot;model&quot; &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>æ¨¡å‹åˆ—è¡¨æå®šä¹‹åï¼Œå°±è¯¥æ•´ä¸€ä¸‹æ¨¡å‹åˆ—è¡¨å’Œcompletionsæ¥å£äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">serve(async (req: Request) =&gt; &#123;</span><br><span class="line">  const url = new URL(req.url);</span><br><span class="line"></span><br><span class="line">  if (req.method === &quot;GET&quot; &amp;&amp; url.pathname === &quot;/v1/models&quot;) &#123;</span><br><span class="line">    return new Response(JSON.stringify(&#123;</span><br><span class="line">      object: &quot;list&quot;,</span><br><span class="line">      data: SUPPORTED_MODELS</span><br><span class="line">    &#125;), &#123;</span><br><span class="line">      status: 200,</span><br><span class="line">      headers: &#123; &quot;Content-Type&quot;: &quot;application/json&quot; &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (req.method === &quot;POST&quot; &amp;&amp; url.pathname === &quot;/v1/chat/completions&quot;) &#123;</span><br><span class="line">    const body = await req.text();</span><br><span class="line">    const headers = new Headers(req.headers);</span><br></pre></td></tr></table></figure><p>å®Œäº‹å„¿è¿˜æœ‰è‡ªå®šä¹‰keyï¼Œä¸èƒ½æ˜¯ä¸ªä¸œè¥¿å°±è¿‡æ¥åˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const VALID_API_KEYS = [&quot;sk-1&quot;, &quot;sk-2&quot;];</span><br><span class="line">const auth = headers.get(&quot;Authorization&quot;);</span><br><span class="line">    const key = auth?.replace(&quot;Bearer &quot;, &quot;&quot;).trim();</span><br><span class="line">    if (!key || !VALID_API_KEYS.includes(key)) &#123;</span><br><span class="line">      return new Response(&quot;Unauthorized&quot;, &#123; status: 401 &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰2apiä¸å¯æˆ–ç¼ºçš„ä¼ªé€ è¯·æ±‚å¤´äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const forwardHeaders: HeadersInit = &#123;</span><br><span class="line">  &quot;Content-Type&quot;: &quot;application/json&quot;,</span><br><span class="line">  &quot;User-Agent&quot;: &quot;Mozilla/5.0&quot;,</span><br><span class="line">  &quot;Origin&quot;: &quot;https://deepinfra.com&quot;,</span><br><span class="line">  &quot;Referer&quot;: &quot;https://deepinfra.com/&quot;,</span><br><span class="line">  &quot;x-deepinfra-source&quot;: &quot;web-embed&quot;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åç®€å•å¤„ç†ä¸€ä¸‹æµå¼å“åº”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const stream = new ReadableStream(&#123;</span><br><span class="line">  async start(controller) &#123;</span><br><span class="line">    const reader = response.body?.getReader();</span><br><span class="line">    const decoder = new TextDecoder();</span><br><span class="line"></span><br><span class="line">    while (reader) &#123;</span><br><span class="line">      const &#123; done, value &#125; = await reader.read();</span><br><span class="line">      if (done) break;</span><br><span class="line">      const chunk = decoder.decode(value);</span><br><span class="line">      for (const line of chunk.split(&quot;\n&quot;)) &#123;</span><br><span class="line">        if (line.startsWith(&quot;data: &quot;)) &#123;</span><br><span class="line">          const jsonText = line.slice(6);</span><br><span class="line">          if (jsonText === &quot;[DONE]&quot;) break;</span><br><span class="line">          try &#123;</span><br><span class="line">            const parsed = JSON.parse(jsonText);</span><br><span class="line">            const delta = parsed.choices[0].delta;</span><br><span class="line">            const reasoning = delta.reasoning_content ?? delta.content ?? &quot;&quot;;</span><br><span class="line">            const output = `data: $&#123;JSON.stringify(&#123; choices: [&#123; delta: &#123; content: reasoning &#125; &#125;] &#125;)&#125;\n\n`;</span><br><span class="line">            controller.enqueue(new TextEncoder().encode(output));</span><br><span class="line">          &#125; catch (_) &#123;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    controller.enqueue(new TextEncoder().encode(&quot;data: [DONE]\n\n&quot;));</span><br><span class="line">    controller.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¥½å•¦ï¼å¤§åŠŸå‘Šæˆï¼è¯¥æœ‰çš„éƒ½æœ‰äº†ï¼Œä¸è¯¥æœ‰çš„ä¹Ÿæœ‰äº†ï¼ˆbushiï¼‰</p><p>æ¥ä¸‹æ¥å°±æ˜¯æŠŠå®ƒæ¨åˆ°denoä¸Šè¿è¡Œäº†</p><p>å¦‚æœæ‚¨éœ€è¦æºç ï¼Œè¯·å‰å¾€ä¸‹é¢çš„é“¾æ¥è·å–ã€‚</p><p><a href="https://linux.do/t/topic/915152">[æŠ›ç –å¼•ç‰]deepinfra2apiï¼Œæˆ‘äººç”Ÿä¸­ç¬¬ä¸€ä¸ª2api - å¼€å‘è°ƒä¼˜ &#x2F; å¼€å‘è°ƒä¼˜, Lv2 - LINUX DO</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> é€†å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WSAï¼Œè¢«é—å¿˜çš„å®˜æ–¹å®‰å“è™šæ‹Ÿæœº</title>
      <link href="//post/45382.html"/>
      <url>//post/45382.html</url>
      
        <content type="html"><![CDATA[<h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a><strong>å†™åœ¨å‰é¢</strong></h4><p>WSAï¼ŒWindowsçš„å®‰å“å­ç³»ç»Ÿï¼Œä½œä¸ºWindows11å®£ä¼ ä¸­çš„â€œç›´æ¥æ‰“å¼€å®‰å“åº”ç”¨â€çš„å™±å¤´ã€‚å‘å¸ƒåˆæœŸï¼Œå­˜åœ¨å¾ˆå¤šbugä¸å…¼å®¹é—®é¢˜ã€‚å¾®è½¯å…¶å®æ˜¯æœ‰èƒ½åŠ›å®Œå–„WSAçš„ï¼Œä½†æ˜¯è¢«å¾®è½¯å¤§åˆ€éƒ¨ç äº†ï¼ˆç¥–ä¼ è‰ºèƒ½è¯´æ˜¯ï¼‰ã€‚ä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºï¼ŒWSAè¿˜æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å®‰å“è™šæ‹Ÿæœºã€‚å®ƒå…·æœ‰è¾ƒä¸ºå®‰å…¨ï¼Œå¯é ã€‚æ”¯æŒç›´æ¥rootï¼ŒADBè°ƒè¯•ï¼Œå‡ºå‚è‡ªå¸¦è°·æ­Œä¸‰ä»¶å¥—ï¼Œä¸Windowsç”Ÿæ€çš„å…¼å®¹æ€§ç­‰ç­‰ä¼˜ç‚¹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å°è¯•åœ¨ä¸ªäººPCä¸Šå®‰è£…WSAã€‚</p><h4 id="å®‰è£…å‰"><a href="#å®‰è£…å‰" class="headerlink" title="å®‰è£…å‰"></a><strong>å®‰è£…å‰</strong></h4><h5 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a><strong>ç³»ç»Ÿè¦æ±‚</strong></h5><p>è‹¥æ˜¯Windows11ï¼Œæœ€ä½ç‰ˆæœ¬ä¸º21H2 Build 22000.526ã€‚</p><p>è‹¥æ˜¯Windows10ï¼Œæœ€ä½ç‰ˆæœ¬ä¸º20H2 Build 10.0.19042.2604ï¼Œæ¨èç‰ˆæœ¬ä¸º22H2 Build 10.0.19045.2311ï¼Œå¹¶ä¸”å·²ç»å®‰è£…äº†ç¼–å·ä¸º<a href="https://www.catalog.update.microsoft.com/Search.aspx?q=KB5014032">KB5014032</a>ä»¥åŠ<a href="https://www.catalog.update.microsoft.com/Search.aspx?q=KB5022834">KB5022834</a>çš„ç³»ç»Ÿè¡¥ä¸</p><p>å…¶æ¬¡ï¼Œå¿…é¡»å¼€å¯ç”µè„‘çš„ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œå¦åˆ™æ— æ³•è¿è¡Œ</p><p>æ¨èå¼€å¯çš„WindowsæœåŠ¡ï¼šè™šæ‹Ÿæœºå¹³å°ï¼ˆå¿…é¡»ï¼‰ã€Windows è™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¹³å°ï¼ˆå¯é€‰ï¼‰ã€é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰ã€Hyper-Vï¼ˆå¯é€‰ï¼‰</p><p>æ³¨æ„ï¼šå¦‚æœæ‚¨ä¹‹å‰å®‰è£…è¿‡å®˜æ–¹çš„WSAï¼Œåˆ™éœ€è¦å®Œå…¨å¸è½½</p><h5 id="ç¡¬ä»¶è¦æ±‚"><a href="#ç¡¬ä»¶è¦æ±‚" class="headerlink" title="ç¡¬ä»¶è¦æ±‚"></a><strong>ç¡¬ä»¶è¦æ±‚</strong></h5><p>å†…å­˜æœ€ä½8GBï¼Œæ¨èå†…å­˜ä¸º16GB</p><p>ç¡®ä¿Cç›˜è‡³å°‘æœ‰10GBå¯ç”¨ç©ºé—´ã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a><strong>å®‰è£…</strong></h4><p>å‰å¾€<a href="https://github.com/A-JiuA/WSAOnWin10/releases">https://github.com/A-JiuA/WSAOnWin10/releases</a>ä¸‹è½½æ‚¨æƒ³è¦çš„ç‰ˆæœ¬ã€‚</p><p>æ³¨ï¼šMindTheGappsä¸ºè‡ªå¸¦è°·æ­Œåº”ç”¨å•†åº—ï¼Œwith-magiskä¸ºè‡ªå¸¦magiskï¼Œè‡ªè¡Œé€‰æ‹©</p><p>ä¸‹è½½åˆ°å¯¹åº”ç‰ˆæœ¬åï¼Œè‡ªè¡Œæ ¡å¯¹å“ˆå¸Œå€¼ï¼Œæ ¡å¯¹å®Œæˆåå°†å‹ç¼©åŒ…è§£å‹ï¼Œè¿›å…¥ç›®å½•åè¿è¡ŒRun.batå³å¯ã€‚</p><h4 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a><strong>è®¾ç½®</strong></h4><p>*æ³¨ï¼šä»è¿™ä¸ªä»“åº“ä¸‹è½½çš„æ‰€æœ‰ç‰ˆæœ¬å‡ä¸å¸¦æœ‰ç³»ç»Ÿæ¡Œé¢ã€‚å„ä½è¯·è‡ªè¡Œå®‰è£…ã€‚</p><p>é¦–å…ˆå‰å¾€è¿›é˜¶è®¾ç½®ï¼Œè®¾ç½®å¥½æ‰€éœ€å†…å­˜ä¸æ˜¾å¡ã€‚ç„¶åï¼Œ<strong>å¼€å¯å¼€å‘è€…æ¨¡å¼</strong>å¹¶ä¸”è®°ä½ç«¯å£å·ã€‚</p><p>ç”±äºæ²¡æœ‰ç³»ç»Ÿæ¡Œé¢ï¼Œä¸”WSAé‡‡ç”¨è™šæ‹Ÿç£ç›˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ADBè¿›è¡Œæ–‡ä»¶ç®¡ç†ã€APKå®‰è£…ç­‰æ´»åŠ¨ã€‚</p><p>æ¨èADBå·¥å…·ï¼š<a href="https://github.com/liangweihao/adb_tool">https://github.com/liangweihao/adb_tool</a></p><p>ä»¥è¿™ä¸ªå·¥å…·ä¸ºä¾‹ï¼Œè¦åœ¨è¾“å…¥å¯¹æ–¹è®¾å¤‡IPè¿æ¥è¿™ä¸€æ å¡«å†™127.0.0.1:[ç«¯å£å·]</p><p>è‡³æ­¤ã€‚ä¸€åˆ‡å·²ç»ç»“æŸã€‚</p><h4 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a><strong>å°¾å£°</strong></h4><p>å¦‚åç»­éœ€è¦æ›´æ–°ç‰ˆæœ¬ï¼Œè¯·å‰å¾€WSAä¸»è®¾ç½®é¢æ¿ï¼Œç‚¹å‡»å…³é—­Windowså­ç³»ç»ŸAndroidâ„¢ç‰ˆã€‚</p><p>ç„¶åå½»åº•åˆ é™¤æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œé‡å¤ä¸Šæ–‡ä½ æƒ³è¦çš„ç‰ˆæœ¬çš„å®‰è£…æ­¥éª¤å³å¯</p><p>æœ€åï¼ŒenjoyğŸ¥°~</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ±è„¸éƒ¨ç½²FileCodeBox(databaseåŒæ­¥)</title>
      <link href="//post/26312.html"/>
      <url>//post/26312.html</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/vastsa/FileCodeBox">https://github.com/vastsa/FileCodeBox</a></p><p>é¡¹ç›®åç§°ï¼šFileCodeBox </p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªé¡¹ç›®èƒ½å¤Ÿå¿«é€Ÿã€é«˜æ•ˆåœ°è·¨è®¾å¤‡ã€è·¨ç½‘ç»œé“¾æ¥å®ç°æ–‡ä»¶ã€å­—ç¬¦å…±äº«ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®è¿‡æœŸæ—¶é—´&#x2F;æ¬¡æ•°ã€‚æ–‡ä»¶å¤§å°é™åˆ¶ä¸º20MBä»¥å†…ã€‚</p><p>ç”±äºæŠ±è„¸å®¹å™¨çš„ç‰¹æ®Šæ€§ï¼ˆå®šæ—¶æ¸…ç©ºæ•°æ®é‡å¯ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®databaseåŒæ­¥ä»¥è¾¾åˆ°ä¸ä¸¢å¤±æ•°æ®ã€‚</p><h4 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h4><p>1.å¤–ç½‘è®¿é—®ç¯å¢ƒ</p><p>2.ä¸€ä¸ªhuggingfaceè´¦æˆ·</p><p>3.ä¸€ç‚¹è€å¿ƒ</p><h4 id="å¿…è¦ç¯å¢ƒå˜é‡"><a href="#å¿…è¦ç¯å¢ƒå˜é‡" class="headerlink" title="å¿…è¦ç¯å¢ƒå˜é‡"></a>å¿…è¦ç¯å¢ƒå˜é‡</h4><p>1.huggingfaceè‡ªå¸¦çš„databaseæœåŠ¡ä»“åº“å</p><p>2.huggingfaceæˆæƒkey</p><h3 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h3><h4 id="åˆ›å»ºç©ºé—´"><a href="#åˆ›å»ºç©ºé—´" class="headerlink" title="åˆ›å»ºç©ºé—´"></a>åˆ›å»ºç©ºé—´</h4><p>å…ˆå‰å¾€spaceé¡µé¢ï¼Œå•å‡»New Space</p><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image.png"></p><p>åœ¨spaceè®¾ç½®é¡µé¢æœ‰å‡ ä¸ªéœ€è¦å¡«çš„ä¸œè¥¿</p><p>Space nameï¼šç©ºé—´åç§°ï¼Œå†³å®šåŸŸåéƒ¨åˆ†ï¼ˆåˆ†é…åŸŸåï¼šç”¨æˆ·å-ç©ºé—´å.hf.spaceï¼‰</p><p>Selet the Space SDKï¼šé€‰æ‹©Docker</p><p>Space harwareï¼šç©ºé—´ç¡¬ä»¶é…ç½®ï¼Œå¦‚æœä½ ä¸æƒ³å¤šèŠ±å†¤æ‰é’±å°±é€‰æ‹©é»˜è®¤çš„freeé…ç½®</p><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-uaia.png"></p><p>å…¶ä»–ä¸œè¥¿ä¸ç”¨å¡«ï¼Œç›´æ¥ç‚¹å‡»ä¸‹æ–¹çš„Create Space</p><h4 id="å­˜å‚¨åº“è®¾ç½®"><a href="#å­˜å‚¨åº“è®¾ç½®" class="headerlink" title="å­˜å‚¨åº“è®¾ç½®"></a>å­˜å‚¨åº“è®¾ç½®</h4><p>ç‚¹å‡»ä¸ªäººå¤´åƒï¼Œé€‰æ‹©New Dataset<img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-hdqa.png"></p><p>è¾“å…¥æ•°æ®åº“åç§°ï¼Œç„¶åç‚¹å‡»Create Dataset</p><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-wzeq.png"></p><p>è¿™é‡Œçš„Datasets: xxxxx&#x2F;xxxxxå°†ä¼šä½œä¸ºDATASET_IDè¿™ä¸ªå˜é‡</p><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-ciqw.png"></p><h4 id="è·å–æˆæƒKey"><a href="#è·å–æˆæƒKey" class="headerlink" title="è·å–æˆæƒKey"></a>è·å–æˆæƒKey</h4><p>ç‚¹å‡»ä¸ªäººå¤´åƒï¼Œå‰å¾€Access Tokens å¹¶è¾“å…¥å¯†ç è¿›å…¥</p><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-tkmw.png"></p><p>å•å‡»Creat new token</p><p>æƒé™å…¨éƒ¨å‹¾é€‰ï¼ˆå¦‚æœä½ æ‡’å¾—å•ç‹¬è°ƒï¼‰</p><p>åˆ›å»ºåä¼šè¿”è¿˜ä»¥hf-xxxxå¼€å¤´çš„ç§˜é’¥ï¼Œè¿™å°†ä½œä¸ºHF_TOKENè¿™ä¸ªå˜é‡ä½¿ç”¨ã€‚</p><h4 id="ç©ºé—´è®¾ç½®"><a href="#ç©ºé—´è®¾ç½®" class="headerlink" title="ç©ºé—´è®¾ç½®"></a>ç©ºé—´è®¾ç½®</h4><p>æ¥åˆ°æ–‡ä»¶é¡µé¢ï¼Œé€‰æ‹©README.mdå¹¶åœ¨ä¸‹æ–¹æ·»åŠ ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app_port: 12345</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/HongShi2333/HongShi2333.github.io/refs/heads/main/images/upload/image-bsdb.png"></p><p>ç„¶åè½¬åˆ°Filesé€‰é¡¹å¡ï¼Œç‚¹å‡»Add fileå¹¶é€‰æ‹©Create a new file</p><p>æ–‡ä»¶åä¸ºsync_data.sh</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># æ£€æŸ¥ç¯å¢ƒå˜é‡</span><br><span class="line">if [ -z &quot;$HF_TOKEN&quot; ] || [ -z &quot;$DATASET_ID&quot; ]; then</span><br><span class="line">    echo &quot;Starting without backup functionality - missing HF_TOKEN or DATASET_ID&quot;</span><br><span class="line">    exec python main.py</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># ç™»å½•HuggingFace (ä½¿ç”¨ç¯å¢ƒå˜é‡æ–¹å¼é¿å…äº¤äº’é—®é¢˜)</span><br><span class="line">export HUGGING_FACE_HUB_TOKEN=$HF_TOKEN</span><br><span class="line"></span><br><span class="line"># åŒæ­¥å‡½æ•°</span><br><span class="line">sync_data() &#123;</span><br><span class="line">    while true; do</span><br><span class="line">        echo &quot;Starting sync process at $(date)&quot;</span><br><span class="line">  </span><br><span class="line">        # åˆ›å»ºä¸´æ—¶å‹ç¼©æ–‡ä»¶</span><br><span class="line">        cd /app</span><br><span class="line">        timestamp=$(date +%Y%m%d_%H%M%S)</span><br><span class="line">        backup_file=&quot;backup_$&#123;timestamp&#125;.tar.gz&quot;</span><br><span class="line">  </span><br><span class="line">        tar -czf &quot;/tmp/$&#123;backup_file&#125;&quot; data/</span><br><span class="line">  </span><br><span class="line">        python3 -c &quot;</span><br><span class="line">from huggingface_hub import HfApi</span><br><span class="line">import os</span><br><span class="line">def manage_backups(api, repo_id, max_files=2):</span><br><span class="line">    files = api.list_repo_files(repo_id=repo_id, repo_type=&#x27;dataset&#x27;)</span><br><span class="line">    backup_files = [f for f in files if f.startswith(&#x27;backup_&#x27;) and f.endswith(&#x27;.tar.gz&#x27;)]</span><br><span class="line">    backup_files.sort()</span><br><span class="line">  </span><br><span class="line">    if len(backup_files) &gt;= max_files:</span><br><span class="line">        files_to_delete = backup_files[:(len(backup_files) - max_files + 1)]</span><br><span class="line">        for file_to_delete in files_to_delete:</span><br><span class="line">            try:</span><br><span class="line">                api.delete_file(path_in_repo=file_to_delete, repo_id=repo_id, repo_type=&#x27;dataset&#x27;)</span><br><span class="line">                print(f&#x27;Deleted old backup: &#123;file_to_delete&#125;&#x27;)</span><br><span class="line">            except Exception as e:</span><br><span class="line">                print(f&#x27;Error deleting &#123;file_to_delete&#125;: &#123;str(e)&#125;&#x27;)</span><br><span class="line">try:</span><br><span class="line">    api = HfApi()</span><br><span class="line">    api.upload_file(</span><br><span class="line">        path_or_fileobj=&#x27;/tmp/$&#123;backup_file&#125;&#x27;,</span><br><span class="line">        path_in_repo=&#x27;$&#123;backup_file&#125;&#x27;,</span><br><span class="line">        repo_id=&#x27;$&#123;DATASET_ID&#125;&#x27;,</span><br><span class="line">        repo_type=&#x27;dataset&#x27;</span><br><span class="line">    )</span><br><span class="line">    print(&#x27;Backup uploaded successfully&#x27;)</span><br><span class="line">  </span><br><span class="line">    manage_backups(api, &#x27;$&#123;DATASET_ID&#125;&#x27;)</span><br><span class="line">except Exception as e:</span><br><span class="line">    print(f&#x27;Backup failed: &#123;str(e)&#125;&#x27;)</span><br><span class="line">&quot;</span><br><span class="line">        # æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">        rm -f &quot;/tmp/$&#123;backup_file&#125;&quot;</span><br><span class="line">  </span><br><span class="line">        # è®¾ç½®åŒæ­¥é—´éš”</span><br><span class="line">        SYNC_INTERVAL=$&#123;SYNC_INTERVAL:-72000&#125;</span><br><span class="line">        echo &quot;Next sync in $&#123;SYNC_INTERVAL&#125; seconds...&quot;</span><br><span class="line">        sleep $SYNC_INTERVAL</span><br><span class="line">    done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># æ¢å¤å‡½æ•°</span><br><span class="line">restore_latest() &#123;</span><br><span class="line">    echo &quot;Attempting to restore latest backup...&quot;</span><br><span class="line">    python3 -c &quot;</span><br><span class="line">try:</span><br><span class="line">    from huggingface_hub import HfApi</span><br><span class="line">    import os</span><br><span class="line">  </span><br><span class="line">    api = HfApi()</span><br><span class="line">    files = api.list_repo_files(&#x27;$&#123;DATASET_ID&#125;&#x27;, repo_type=&#x27;dataset&#x27;)</span><br><span class="line">    backup_files = [f for f in files if f.startswith(&#x27;backup_&#x27;) and f.endswith(&#x27;.tar.gz&#x27;)]</span><br><span class="line">  </span><br><span class="line">    if backup_files:</span><br><span class="line">        latest = sorted(backup_files)[-1]</span><br><span class="line">        api.hf_hub_download(</span><br><span class="line">            repo_id=&#x27;$&#123;DATASET_ID&#125;&#x27;,</span><br><span class="line">            filename=latest,</span><br><span class="line">            repo_type=&#x27;dataset&#x27;,</span><br><span class="line">            local_dir=&#x27;/tmp&#x27;</span><br><span class="line">        )</span><br><span class="line">        os.system(f&#x27;tar -xzf /tmp/&#123;latest&#125; -C /app&#x27;)</span><br><span class="line">        os.remove(f&#x27;/tmp/&#123;latest&#125;&#x27;)</span><br><span class="line">        print(f&#x27;Restored from &#123;latest&#125;&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;No backup found&#x27;)</span><br><span class="line">except Exception as e:</span><br><span class="line">    print(f&#x27;Restore failed: &#123;str(e)&#125;&#x27;)</span><br><span class="line">&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¸»ç¨‹åº</span><br><span class="line">(</span><br><span class="line">    # å°è¯•æ¢å¤</span><br><span class="line">    restore_latest</span><br><span class="line">  </span><br><span class="line">    # å¯åŠ¨åŒæ­¥è¿›ç¨‹</span><br><span class="line">    sync_data &amp;</span><br><span class="line">  </span><br><span class="line">    # å¯åŠ¨ä¸»åº”ç”¨</span><br><span class="line">    exec python main.py</span><br><span class="line">) 2&gt;&amp;1 | tee -a /app/data/backup.log</span><br></pre></td></tr></table></figure><p>å†æ¬¡é‡å¤æ“ä½œï¼Œæ–‡ä»¶åä¸ºDockerfile</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">FROM lanol/filecodebox:beta</span><br><span class="line"></span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y \</span><br><span class="line">    python3-pip \</span><br><span class="line">    git \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class="line"></span><br><span class="line">RUN pip3 install --no-cache-dir huggingface_hub datasets</span><br><span class="line"></span><br><span class="line">RUN useradd -m -u 1000 user</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">ENV HOME=/home/user \</span><br><span class="line">    PATH=/home/user/.local/bin:$PATH \</span><br><span class="line">    HF_HOME=/app/data/hf_cache \</span><br><span class="line">    PYTHONUNBUFFERED=1</span><br><span class="line"></span><br><span class="line">RUN mkdir -p /app/data &amp;&amp; \</span><br><span class="line">    chown -R user:user /app/data</span><br><span class="line"></span><br><span class="line">COPY sync_data.sh /app/</span><br><span class="line">RUN chmod +x /app/sync_data.sh &amp;&amp; \</span><br><span class="line">    chown user:user /app/sync_data.sh</span><br><span class="line"></span><br><span class="line">USER user</span><br><span class="line"></span><br><span class="line">EXPOSE 12345</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;/app/sync_data.sh&quot;]</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è½¬åˆ°Settingé€‰é¡¹å¡ï¼Œæ‰¾åˆ°Variables and secrets</p><p>å•å‡»New Secretï¼Œå¹¶å°†ä¸‹é¢çš„å€¼é”®å…¥</p><ul><li>DATASET_ID å­˜å‚¨åº“è®¾ç½® æ­¥éª¤ä¸­çš„å€¼ï¼Œä¸ºç”¨æˆ·å&#x2F;å­˜å‚¨åº“ID</li><li>HF_TOKEN è·å–æˆæƒKey æ­¥éª¤ä¸­çš„å€¼ï¼Œä¸ºhf-xxxxxxxxæ ¼å¼</li><li>SYNC_INTERVAL å¤‡ä»½é—´éš”æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œæ¨è3600</li></ul><p>ç„¶åæˆ‘ä»¬çš„é¡¹ç›®å°±å¯ä»¥é¡ºåˆ©çš„è·‘èµ·æ¥äº†</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®éƒ¨ç½² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Huggingface </tag>
            
            <tag> éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
